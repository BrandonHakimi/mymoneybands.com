<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mymoneybands | Dashboard</title>
    <link rel="stylesheet" type='text/css' href="/CSS/style.css">
    <script src="https://cdn.anychart.com/releases/8.0.1/js/anychart-core.min.js"></script>  <!--graph code-->
    <script src="https://cdn.anychart.com/releases/8.0.1/js/anychart-pie.min.js"></script>  <!--graph code-->
</head>
<script type = "text/javascript">  //This script should contain all js code for now
                                   //We can place functions in different files later
//HEAD


var FirstName;
var LastName;


var Name;

var MonthlyIncome;
var Budget;
var TotalBills = 0;
var MoneyLeft;
var Choice;
//var Continue;
var Temp;

var ArrayPositionTracker = 0;
const InputArray = [];
// CategoryArray holds category name, category sum, category percentage
const CategoryArray = [["Bills", 0, 0], ["Food",0,0], ["Entertainment",0,0], ["Transportation",0,0], ["Education",0,0]];


//*********************************************************************************************************

function setCookie(cname,cvalue,exdays) {
  const d = new Date();
  d.setTime(d.getTime() + (exdays*24*60*60*1000));
  let expires = "expires=" + d.toUTCString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

function getCookie(cname) {
  let name = cname + "=";
  let decodedCookie = decodeURIComponent(document.cookie);
  let ca = decodedCookie.split(';');
  for(let i = 0; i < ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}

function checkCookie() {
    let user = getCookie("username");
    if (user != "") {
    alert("Welcome again, " + user);
    } else {
        user = prompt("Please enter your name:","");
        if (user != "" && user != null) {
            setCookie("username", user, 30);
        }
    }
    Name = user;
}

//*********************************************************************************************************

function Initialize() {
    FirstName = prompt("What is your first name?");
    LastName = prompt("What is your last name?");
    var MonthlyTest = false;
    while (MonthlyTest === false) {
        MonthlyIncome  = prompt("What is your Projected Income for this month?");
        if(isNaN(MonthlyIncome)) {
            window.alert("Invalid Input, please enter a number.");
        } else {
            MonthlyTest = true;
        }
    }
    var BudgetTest = false;
    while (BudgetTest === false) {
        Budget = prompt("What is your budget for this month?");
        if(isNaN(Budget)) {
            window.alert("Invalid Input, please enter a number.");
        } else {
            BudgetTest = true;
        }
    }
    window.alert(`Hello, ${FirstName} ${LastName}. Your projected income for this month is $${MonthlyIncome}. You have set your budget at $${Budget}.`);
}

function InputBills() {
    if (MonthlyIncome === undefined) {
        window.alert("You do not have any data with MyMoneyBands, please select the Initialize button first.");
    } else {
        do {
            var BillName = prompt("Who is this Bill due to? (Company or Label)");
            var BillValue;
            var BillTest = false;
            while (BillTest === false) {
                BillValue = prompt("What is the Payment Amount for this Bill?");
                if(isNaN(BillValue)) {
                    window.alert("Invalid Input, please enter a number.");
                } else {
                    BillTest = true;
                }
            }
            var BillDate = prompt("What is the date that this Bill is due?");
            var RecurringChoice = prompt("Is this Bill a monthly recurring charge?");
            var RecuringCaps = RecurringChoice.toUpperCase();
            var RecurringFlag;
            if (RecuringCaps === "Y" || RecuringCaps === "YE" || RecuringCaps === "YES" || RecuringCaps === "YA" || RecuringCaps === "YEAH" || RecurringChoice === 1) {
                RecurringFlag = true;
                window.alert(`You have input a Bill due to ${BillName} that will charge you $${BillValue} due on ${BillDate}. This Bill is a recurring charge.`);
                InputArray[ArrayPositionTracker] = new Array("BL", BillName, BillValue, BillDate, RecurringFlag);
                ArrayPositionTracker++;
            } else {
                RecurringFlag = false;
                window.alert(`You have input a Bill due to ${BillName} that will charge you $${BillValue} due on ${BillDate}. This Bill is not a recurring charge.`);
                InputArray[ArrayPositionTracker] = new Array("BL", BillName, BillValue, BillDate, RecurringFlag);
                ArrayPositionTracker++;
            }
            var Continue = prompt("Are there any more bills you wish to input?");
            var ContinueCaps = Continue.toUpperCase();
        } while (ContinueCaps === "Y" || ContinueCaps === "YE" || ContinueCaps === "YES" || ContinueCaps === "YA" || ContinueCaps === "YEAH" || Continue === 1);
    }
}

function InputTransactions() {
    if (MonthlyIncome === undefined) {
        window.alert("You do not have any data with MyMoneyBands, please select the Initialize button first.");
    } else {
        do {
            var TransactionTitle = prompt("What did you spend your money on?");
            var TransactionCost;
            var TransactionTest = false;
            while (TransactionTest === false) {
                TransactionCost = prompt("How much did this transaction cost?");
                if(isNaN(TransactionCost)) {
                    window.alert("Invalid Input, please enter a number.");
                } else {
                    TransactionTest = true;
                }
            }
            window.alert(`You have input a Transaction for ${TransactionTitle} that cost you $${TransactionCost}.`);
            InputArray[ArrayPositionTracker] = new Array("TR", TransactionTitle, TransactionCost, "NULL", "NULL");
            ArrayPositionTracker++;
            var Continue = prompt("Are there any more Transactions you would like to input?");
            var ContinueCaps = Continue.toUpperCase();
        } while (ContinueCaps === "Y" || ContinueCaps === "YE" || ContinueCaps === "YES" || ContinueCaps === "YA" || ContinueCaps === "YEAH" || Continue === 1);
    }
}

//*********************************************************************************************************

function InputSpending() {
    if (Budget === undefined) {
        window.alert("No data, please use Initialize button to set up necessary data for the month first.");
    } else {
        window.alert(`Hello ${Name}, you have a budget of $${Budget} and a total income of $${MonthlyIncome} which leaves you with $${MoneyLeft} to spend on other things.`);
        while(1)    {
            var Continue = prompt("Would you like to input a transaction?");
            var ContinueCaps = Continue.toUpperCase();
                if (ContinueCaps === "Y" || ContinueCaps === "YE" || ContinueCaps === "YES" || ContinueCaps === "YA" || ContinueCaps === "YEAH" || Continue === 1) {
                    var Transaction = prompt("How much was this transaction?");
                    if(isNaN(Transaction))
                         window.alert("Invalid Input, please enter a number.");
                        else
                        MoneyLeft -= Transaction;
                }
            else if (ContinueCaps === "N" || ContinueCaps == "NO" || ContinueCaps == "NAW" || ContinueCaps == "NAH" || Continue === 0) {
                break;
            }
        }
    }
}

function CalculateMonthlySum() {
    //Calculate functions, which will lead to output/display and financial advisement

    //iterate over InputArray[i][2] for money

    //iterate over InputArray[i][1] for category
    var sum = 0;
    for (var i = 0; i < InputArray.length; i++){
        let temp = parseFloat(InputArray[i][2]);
        if(isNaN(temp) === false){
            sum += temp;
        }
    }

    window.alert(sum);
}

function TestArray() {
    for (var i = 0; i < InputArray.length; i++) {
        for (var j = 0; j < 5; j++) {
            window.alert(`${i},${j}: ${InputArray[i][j]}`);
        }
    }
            window.alert("This is a test in the array function");
}

function CalculateCategoryPercent() {
    var percent = 0;
    var sum = 0;
    var category = prompt("Enter the category you would like the percentage calculated for");
    for (var i = 0; i < InputArray.length; i++){
        let temp = parseFloat(InputArray[i][2]);
        if(isNaN(temp) === false){
            sum += temp;
        }
    }
    for (var i = 0; i < InputArray.length; i++){
        var categoryname = InputArray[i][1]
         if (category === categoryname){
            percent += (parseFloat(InputArray[i][2])*100)/sum
         }
             
    }   
        window.alert(percent)
}

function TestChart() {

// set the data
var data = [
    {x: "White", value: 223553265},
    {x: "Black or African American", value: 38929319},
    {x: "American Indian and Alaska Native", value: 2932248},
    {x: "Asian", value: 14674252},
    {x: "Native Hawaiian and Other Pacific Islander", value: 540013},
    {x: "Some Other Race", value: 19107368},
    {x: "Two or More Races", value: 9009073}
];

// create the chart
var chart = anychart.pie();

// set the chart title
chart.title("Population by Race for the United States: 2010 Census");

// add the data
chart.data(data);

// display the chart in the container
chart.container('container');
chart.draw();

}







</script>
<header>
    <div class="menu">
        <img class="logo" src="/IMGs/Screenshot 2022-11-16 at 11.04.00 PM.png" alt="Logo">
        <h3>Hi, Scrum</h3>
        <h2>
            <a href="#"><input type="button" value="Dashboard"></a>
            <br>
            <br>
            <a href="#"><input type="button" value="Recurring"></a>
            <br>
            <br>
            <a href="#"><input type="button" value="Spending"></a>
            <br>
            <br>
            <a href="#"><input type="button" value="Net Worth"></a>
        </h2>
    </div>
</header>
<body> 
    <h1>Good evening, Scrum</h1>
    <nav>
        <br>
        <input type ="button" onclick = "Initialize()" value = "Initialize">
        <input type ="button" onclick = "checkCookie()" value = "Cookie Test Button">
        <input type ="button" onclick = "InputTransactions()" value = "Input Transactions">
        <input type ="button" onclick = "InputBills()" value = "Input Bills">
        <br>
        <br>
        <input type ="button" onclick = "TestArray()" value = "TestArray (Print all)">
        <br>
        <br>
        <input type ="button" onclick = "CalculateMonthlySum()" value = "Calculate Monthly Sum">
        <input type ="button" onclick = "CalculateCategoryPercent()" value = "Calculate Monthly Percentage">
        <br>
        <input type ="button" onclick = "TestChart()" value = "Test graph button">

        <br>
        <div id="container" style="width: 100%; height: 100%"></div>  <!--graph code-->
        <br>

    </nav>  
</body>
</html>



<html>  
<head>  
<title>dropdown menu using select tab</title>  
</head>  
<script>  
function favTutorial() {  
var mylist = document.getElementById("myList");  
document.getElementById("favourite").value = mylist.options[mylist.selectedIndex].text;  
}  
</script>  
  
<body>  
<form>  
<b> Select your category using dropdown list </b>  
<select id = "myList" onchange = "favTutorial()" >  
<option> ---Choose Category--- </option>  
<option> Bills </option>  
<option> Food </option>  
<option> Entertainment </option>  
<option> Transportation </option>  
</select>  
<p> Your selected category is:   
<input type = "text" id = "favourite" size = "20" </p>  
</form>  
</body>  
</html>  
